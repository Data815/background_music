---
title: "Background Music Will not Significantly Distract Attention"
author: "Hong Pan"
date: "`r format(Sys.time(), '%B %d %Y')`"
output: 
  bookdown::pdf_document2:
    toc: yes


abstract: "Music has gradually become an essential part of our lives, and it has become a common trend for most students to choose to listen to music while studying. This paper used the dataset collected by Arriken Worsley[@dataset] to examine whether the background music affects students' attention level by conducting a within-subjects experiment to compare the time of finishing the Trail Making Test with and without music. The linear mixed model results show that background music does not significantly impact attention level but has a significant negative relationship with the order of the test being done.  \\par 

 \\textbf{Keywords:} Background Music, Attention, Trail Making Test, Executive Functioning Skills"


header-includes:
 - \usepackage{float}
 - \floatplacement{figure}{H}
 - \floatplacement{table}{H}



thanks: "Code and data are available at: https://github.com/Data815/background_music"

always_allow_html: yes

bibliography: references.bib

---




```{r setup, include=FALSE}

knitr::opts_chunk$set(echo = TRUE)
library(plyr)
library(tidyverse)
library(here)
library(ggplot2)
library(lme4)
library(kableExtra)
library(performance)
library(stargazer)
library(lattice)
library(MuMIn)
```


```{r import, include=FALSE}
#import dataset
dataset<-readr::read_csv(here::here("Input/music_dataset.csv"))
dataset$Id<-as.factor(dataset$Id)
dataset$order<-as.factor(dataset$order)

```


# Introduction

Should students listen to music while studying? In contemporary times, music has become an indispensable part of human life.  With the development of technology, students can more easily and conveniently access music through various devices and channels. According to Nielsen's report, teens use an average of 3.8 devices in a week to engage with music, such as smartphones, laptops, and tablets, and on average, teens spend over 32 hours per week listening to music[@Nielsen]. Meanwhile, the survey took by Jackson Gutknecht illustrates that around 75 of 80 students said they listen to music while studying[@Jackson]. Listening to music during the learning process has become a common trend for many students, therefore, it is important to understand the influence of background music on students’ attention level.

Trail Making Test, which is used to measure executive functioning skills, was utilized to study whether background music would influence students’ attention level. Executive functions refer to the mental processes needed when people have to concentrate or pay attention, which is "a specific set of attention-regulation skills involved in conscious goal-directed problem-solving.[@executive]” Defectiveness of executive functioning skills will make students have a hard time paying attention[@Understood]. In the Trail Making Test, each round consists of several dots numbered from 1 to 12 and lettered A to J, randomly distributed on a page. The participants are required to connect the circles as soon as possible.^[The order should alternate between numbers and letters, i.e. 1, A, 2, B,...] The paper written by Arielle S. Dolegui[@paper1] used repeated measures to design experiments to study the impact of different types of music and playing volume levels on students’ cognitive ability to complete assignments. The result illustrates that students perform the best in silence. Meanwhile, the paper published by Janina and Tina investigates[@paper2] how background music influences learning by conducting a between-subjects design experiment.  The result for their paper demonstrates that background music did no influence performance for learners. Is it true that background music does not affect the ability of students to process information?

The within-subjects experiment is conducted by randomly selected 47 students from Elizabeth Blackburn School of Science, and each participant needs to complete two rounds of tests, with and without music. In this study, the practice effect^[People improve their scores simply by taking the same test multiple times. (Kendra Cherry,2019)]  may exist since the students need to do the test twice continuously. In order to reduce the impact from practice effect, participants were randomly selected to two different groups with different starting order. One group started with a test with background music, while the other group started the test in silence. The dataset created by Arriken Worsley[@dataset] records the time of accomplishing the test, gender of the student, music favourability, and the order of test which is starting with the music or without the music. The descriptive analysis results show that students performed better without music. In addition, whatever the order of the test, the second round will be faster on average. Furthermore, background music has the biggest influence on male's executive functioning skills. Because the dataset is longitudinal, the linear mixed model is applied to do the statistical analysis. The result from the model illustrates that the students’ attention level is not significantly impacted by listening to the music. The paper concludes that the background music does not significantly impact students' attention level. 

The rest of this paper is structured as follows. In the data section, the experimental process, sampling method and data set variables will be explained. The descriptive analysis detail will also be presented. In the model section, the reason for choosing the model, model assumptions, and model selection procedure will be discussed. In the result section, the statistical analysis detail and model validation result will be illustrated and explained. In the discussion section, the main findings, limitations, ethics statements, and further research will be discussed.  In the Appendix, the screenshot for the survey and the real Trail Making Test used for the experiment will be shown. Finally, the interactive graphs display on Shinyapp^[The Shinyapp link for the interactive graphs is https://hongtrista.shinyapps.io/Shinyapp/?_ga=2.86381278.759236858.1619203106-1272735195.1619203106 ] allow the audience to explore the data distribution by gender, test type and rating.


# Data
The data used in this paper analyzed through the R statistical programming language[@citeR] to investigate whether background music affects students' level of attention. The Tidyverse package[@cite_tidyverse] for data processing, the KableExtra package[@cite_kableExtra] and plyr package[@cite_plyr] for generating tables, and the ggplot2 package[@cite_ggplot2] for drawing graphs are used during the analysis process. Meanwhile, the here package[@cite_here] for importing datasets and the lme4 package[@cite_lme4] for creating models are also used. The performance package[@cite_performance], lattice package[@cite_lattice] and MuMIn package[@cite_MuMIn] are used to draw charts, check model assumptions and model validity. Finally, the stargazer package[@cite_stargazer] is applied to visualize the model result.

## Participants
The researcher experimented in 2020 at the Elizabeth Blackburn School of Science, a secondary school funded by the Melbourne government. The study sample comprised 47 students between 13 and 17 years old randomly chosen from the school. Both male and female students participated in the research on whether background music affects people's attention. Figure \@ref(fig:gender), the pie chart, illustrates that 51% are female, 47% are male, and the rest 2% are transexual.

## Experiment 

### Intervention
The purpose of the experiment is to examine whether background music affects the attention of students. The design of the experiment is to randomly select some students from the school to complete the "Trail Making Test" with and without background music and record the time of completion. For this experiment, the intervention is the presence of background music. Experiment designer Arriken Worsley wants to determine whether background music will affect students' attention level by studying whether students take longer to complete the test with background music than without background music. If the result is that the time for the student to complete the test with background music is longer than the time without background music, it means that the background music affects the student's attention to a certain extent. Otherwise, background music will not affect students' attention. The experiment can help the target audience develop some basic understanding of whether music impacts attention and correctly decide whether to listen to music in future studies or avoid inefficiency.

### Procedure
As the paper aims to understand whether background music will affect students' attention level, all students in the world would be considered as the target population. The frame population is all students from the school. 47 students being randomly selected from the school as a sampled population to finish the experiment. The detailed procedure will be explained as followed.

The 47 students chosen randomly from the school were randomly divided into two groups to start the Trail Making Test in a different order. 27 students started the experiment in a quiet environment, and the remaining 20 students started with the existence of background music. Figure \@ref(fig:test1) and Figure \@ref(fig:test2) in the appendix show two different Trail Making Test used in different test environments during the experiment. Each test contained 23 randomly distributed dots, including 12 numeric points from 1 to 12 and 11 letter points from A to K. Participants must start connecting from 1 and connected these points to the final point in alternating ascending order, such as 1, A, 2, B, 3, C, et cetera. During the process, the line should not cross over. The background music, the intervention,  played during the experiment would be Designer's song, Panda, because, during the experiment period, it was at the top of the billboard and was the most popular music. 

The experiment was conducted in the form of a class. Students selected to the same group started the test uniformly, and a timer was placed in front of each student to record the completion time. In order to counteract the learning effect gained from the first test to the second one to some extent, changing the order of starting the experiment was applied. The students in the first group started the Trail Making Test without background music, then did another test while playing the background music, Panda. The second group of students started to do the test with background music and did the second test in silence for control. After each round, the accomplishing time was recorded in unit second. Meanwhile, when participants finished all the two tests, they were required to fill in an anonymous survey(Figure \@ref(fig:survey)) shown in the appendix that asked for feedback, gender, and personal enjoyment of the song played, on a scale from one to five. 


## Mearues
The paper intends to use the dataset collected from the experiment set up by Arriken Worsley[@dataset] to analyze whether the background music will influence students' attention level. The dataset records 94 observations with 13 variables. The data set contains some empty columns and variables that are not related to the research topic^[The variables are "question" (the experimenter's comment) as well as "Diff-AVG" and "DIF_AVG". The raw datasets before cleaning could be found in the Input folder, music_first.csv and no_music_first.csv.]; therefore, only 8 variables and 94 observations are left after changing the dataset into a longitudinal. 

The **Id** represents a student, and a number represents a student. **Test_Type** illustrates whether the students finished the test with background music or without, which indicates the data comes from the control group or the treatment group. **Time_Sec** shows how many seconds does the student to accomplish the Trail Making Test. The column, **Gender**, shows the gender of the student. **Rating** indicates the student's preference for background music. After completing the experiment, students need to fill out a questionnaire(Figure \@ref(fig:survey) in appendix) anonymously, including rating background music from 1 to 5. The higher the score, the more they like the background music. The `Feedback` column shows the students' feelings and evaluations of the entire experiment. **Change** shows test 2 compares with test 1, by what percentage increase or decrease the time. **Order** records the order of the test, which helps to illustrate whether the test is the first or second round.


## Descriptvie Analysis
### Gender distribution

According to the experiment, students are randomly selected from the school. Students need to fill out a questionnaire after completing two "Trail Making Test" to inform the experiment initiator of their gender and other information. The pie chart(Figure \@ref(fig:gender)) shows that among the students selected for the experiment, the proportions of men and women are almost the same, which leads to the conclusion that the distribution of men and women is almost the same. Female accounted for 51% of the total number, male accounted for 47% of the total number, and the rest were transexual.

```{r gender,fig.cap = "Gender ratio chart",echo=FALSE,fig.height=5,fig.width=5}
gender_ratio<-data.frame(table(dataset$Gender))

pct <- round(gender_ratio$Freq/sum(gender_ratio$Freq)*100)
lbls <- paste(gender_ratio$Var1, pct) # add percents to labels
lbls <- paste(lbls,"%",sep="") # ad % to labels
pie(gender_ratio$Freq,labels = lbls, col=c('#1B9E77',"#D95F02","#7570B3"),
   main="Pie Chart of Gender")
```


### Mean time by test type

Table \@ref(tab:table1) shows the average time to complete a Trail Making Test with or without background music. The results in Table \@ref(tab:table1) show that, compared with no music, it takes longer for students to complete the test with background music. The average time to complete a test with background music is 47.19 seconds(SD= 13.53), while the average time to complete a test in silence is 44.26 seconds(SD= 13.30), which is approximate 3 seconds faster than with background music.

```{r table1,fig.cap='Average time to complete a test with and without background music', echo=FALSE}

library(plyr)
ddply(dataset, .(Test_Type), summarize,  "Average Time to Complete a Test"=round(mean(Time_Sec),2),'Standard Deviation'=round(sd(Time_Sec),2))%>%
  kbl(caption = 'Average time to complete a test with and without background music',
      align = "cccc") %>%
  kable_styling(latex_options = "hold_position")

```



### Average time of completing a test by type and order
Since the experiment is a within-subject experimental design, each student is both in a control group and a treatment group. In order to study whether the practice effect exists, Table \@ref(tab:order) shows that in addition to studying the average time for students to complete the test in each experiment condition, the factor of the order of completing the test is also added.  Overall, regardless of whether students completed the first round of the test with background music or quietly, the average completion time of the second round was shorter than the average time of the first round. Table \@ref(tab:order) shows that when students' first round is added intervention, the average time to complete the test is around 52.56 seconds(SD= 12.14). The second round, which is without background music, takes around 40.56 seconds(SD= 15.52) to accomplish the test. For the students who finish the test without background music in the first round, the average time to complete the test is 49.52 seconds(SD= 12.06). When added intervention, the background music, to the second round, the average time for them to complete the test not only did not increase, but it decreased by one second, about 39.95 seconds(SD= 10.18).

```{r order, fig.cap="Average time of completing a test by type and order",echo=FALSE,message=FALSE}
#remove package plyr for using group_by function
detach(package:plyr)
dataset %>% 
  group_by(order, Test_Type) %>% summarize("Average Time to Complete a Test" = round(mean(Time_Sec),2),'Standard Deviation'=round(sd(Time_Sec),2))%>%
kbl(caption = 'Average time of completing a test by type and order',
      align = "cccc") %>%
  kable_styling(latex_options = "hold_position")
```



### Average time for different genders to complete the test by test type

The paper[@female] written by Bruce Goldman illustrates that females are good at concentration and not easily being distracted compared with males. In order to study whether background music will affect students' attention levels differently due to different genders, Figure \@ref(fig:gendertime) is drawn. Overall, the conclusion from the graph goes along with the conclusion Bruce Goldman made[@female]: females are less affected by the intervention. At the same time, males' attention levels are easily affected. The descriptive analysis result shows that background music increased the average time for female and transexual students to complete the test by about one second. In contrast, background music influences male students' average time to complete the test increased by 5 seconds. Moreover, whether with or without background music, the average completion time for men is the longest, while the average time for transexuals is the shortest.


```{r gendertime, fig.cap="Average time for different genders to complete the test by test type",echo=FALSE,fig.height=4.5,fig.width=5,message=FALSE}
d1 <- dataset %>% 
        group_by(Gender,Test_Type) %>% 
        summarise(mean_time = mean(Time_Sec))

ggplot(d1, aes(x =Gender , y = mean_time,fill=Gender)) +
  geom_bar(stat = "identity",width = 0.8)+
  facet_wrap(~Test_Type)+
  ylab("Mean time")+
  ggtitle("Average time to complete the test by gender and test type")+
  theme_minimal()+
  theme(plot.title = element_text(size=12))

```

### Music favorability and average time to complete the test

```{r,echo=FALSE,warning=FALSE,message=FALSE}

d2 <- dataset %>% 
        group_by(Rating)%>% 
        summarise(mean_time = mean(Time_Sec))

overall_mean_time<-mean(dataset$Time_Sec)
```


The line chart shown in Figure \@ref(fig:hhhh) is used to visualize the relationship between the degree of enjoyment of music from students and their attention levels. The blue line indicates the average time to complete the test at each rating level, and the brown dash line represents the total average time for accomplishing the test. As we can see from the chart, when the rating is approximately less than 3, the average time for students to complete the test is all greater than the overall average. When the rating is greater than 3, the average time for all students is significantly less than the overall average except for level 4.0. According to the findings in Figure \@ref(fig:hhhh), when students listen to songs they do not like while studying or doing other things that require concentration, their attention level is easily affected.



```{r hhhh, fig.cap="Music favorability and average time to complete the test",echo=FALSE,message=FALSE}
ggplot(d2,aes(x=Rating,y=mean_time))+
  geom_line(color='blue')+
  scale_x_continuous(breaks = seq(1,5,0.5),limits = c(1,5))+
  scale_y_continuous(breaks = seq(0,50,5),limits = c(0,50))+
  geom_hline(yintercept = overall_mean_time,
             color = "darkred",
             linetype = "dashed")+
  geom_text(aes(Rating[1], overall_mean_time , label = "Mean"), vjust= 2)+
  ggtitle("Favorability of music and average time to complete the test")

```




# Model

The dataset collected from the within-subject experimental design mentioned in the paper is longitudinal data, which means one participant provides multiple data points^[In the experiment, each student made the Trail Making test twice, one with background music, the other one without background music.]. These data will be related to each other because they are from the same participant. In this case, the basic linear regression model cannot be applied as it assumes that data points are independent of one another. Therefore, a linear mixed model provides an elegant model to handle the correlated observations within a group and suitable for the study with multiple trials per participant. 


The analysis in this paper will be done entirely through R[@citeR]. Figure \@ref(fig:randomeffect) below shows the completion time of each student in a different order and test environment. One line represents two Trail Making Tests completed by a student, and the colours help distinguish the test environment. For example, a red line indicates that the student completed the first round of the test with background music and then completed the second round of the test in a quiet environment. Regardless of the experimental environment in which the first round is conducted, Figure \@ref(fig:randomeffect) shows that different people have different initial attention levels, which indicates that there are random effects, predominantly random intercepts. In addition, the slope for each line is different, which imply that random slope also exist. So, the linear mixed model is applicable. It quantified how background music played in the background could impact the students' attention level. 

```{r randomeffect,fig.cap="Finishing Time by Order with Different Starting Condition, for Each Student",echo=FALSE,warning=FALSE}
dataset%>%
  ggplot(aes(x=order,y=Time_Sec,group=Id,colour=Test_Type))+
  theme_classic()+
  geom_line(alpha=0.8)+
  labs(title="Finishing Time by Order with Different Starting Condition, for Each Student",
       subtitle="Time Data",
       x="Order",
       y="Time_Sec")+
  guides(color=guide_legend("Starting condition"))
```

## Linear Mixed Model
$$
\hat Y_{Time\space Sec}=\hat\beta_0+\hat\beta_1*I_{No\ Music_{ij}}+\sum_{a=Male}^{Transexual}\hat\beta_2* Gender_{aij}+\hat\beta_3*I_{order=2ij}+\hat\beta_4*Rating_{ij}+\alpha_{ij}+\epsilon_{ij}
$$
**Time** is the time of the i-th students at the j round to complete the Trail Making Test. **The beta** shown in the formula are the overall fixed intercept and fixed-effect coefficients. **The alpha** is a vector of the random effect for group identity, which includes random intercept and random slope effect for the i-th student. **Epsilon** is the random error for the observation j in group i. **The variables** are the fixed-effect regressors for observation j in group i.

According to the dataset, the response variable and the explanatory variable, Rating, are continuous variables in the model. The reason is that they all can take any value between their minimum value and their maximum value[@continuous]. The other variables, type of test, gender and order, are all categorical variables because all of the data within the variables can be stored into groups or categories with names or labels[@categorical].

## Modeling Procedure
A linear mixed model consisted of two-part, fixed effect and random effect. The modeling procedure will start to specify the random effects term that best fits the data in the null model, then building up hierarchically. ANOVA, p-value, AIC and RMSE help to find the best-fitted model for the data and check the model validation.

### Random Effects
Three null models with different random effect terms will be established. The models will be compared using the ANOVA function to compare the p-values to see if the model adaptability is improved by adding other items.

The three different random effect terms are as follows:

* `(1| Id)`: Random intercepts and slopes for each Id.  
* `(1 + Test_Type |Id)`: The effect of the background music will vary between each student Id. Random intercepts for test type, random slopes for students influenced by test type.
* `(1 + Test_Type * order | Id)`: Each student Id can have their intercept, random slopes influenced by Test Type and order, and their interaction between Test Type and order.


### Fixed Effects
After finding the best-fitting random effect term, ANOVA will be applied to select the significant variables and compare different models. The model for the study starts with only focused variable, test type. Then, other variables will be included in the model one at a time. From the ANOVA output, if the p-value were smaller than 0.1, the variable would be added to the final model. In the process of determining the best model, ANOVA will be applied and the smaller AIC^[AIC(Akaike information criterion) is a mathematical method for evaluating how well a model fits the data generated. AIC is used to compare different models and determine which one is the best fit for the data[@AIC]] suggests the better model.

## Model Diagnostics
Before conducting the linear mixed model, the following assumptions need to be checked: whether the variance of the residuals is equal across groups, whether the residuals of the model are normally distributed, and whether there does not exist multicollinearity.

Figure \@ref(fig:a1) helps to check the assumption of the variance of the residuals is equal across groups. There seems to be an evenly spread around the central line from the chart(Figure \@ref(fig:a1)) and no patterns evident, which means the assumption of homogeneity of variance being satisfied.

```{r a1, fig.cap="The variance of the residuals is equal across groups",echo=FALSE,fig.height=3,fig.width=5}
model<-lmer(Time_Sec~ 1+Test_Type+order+Rating+Gender+(1|Id),data=dataset,REML=FALSE)


# homogeneity of variance

plot(model)# looks alright, no patterns evident
```


QQ plot(Figure \@ref(fig:a2)) can provide an estimation of where the standardized residuals lie for normal quantiles. Substantial deviation from the provided line indicates that the residuals themselves are not normally distributed. From Figure \@ref(fig:a2), there is some deviation from the expected normal line towards the two-side tails. However, overall, the line looks straight and, therefore, pretty normal and suggests that the assumption is not violated.

```{r a2, fig.cap="The residuals of the model are normally distributed",echo=FALSE,fig.height=4,fig.width=4}
library(lattice)
qqmath(model)
```

Multicollinearity means one independent variable can be linearly related to the others[@multicollinearity]. Variance inflation factor(VIF) is utilized to verify the assumption of no multicollinearity because VIF is a measure of the amount of multicollinearity. The bar chart in Figure \@ref(fig:a3) illustrates that all the independent variables in the model have a VIF value less than 2.5, which means there are low, and even no multicollinearity exists.


```{r a3, fig.cap="multicollinearity",echo=FALSE,fig.height=3,fig.width=6}
library(performance)

plot(check_collinearity(model))

```

# Results
The purpose of the study was to explore whether background music has a distracting effect on students' attention levels. There were a total of 47 students participated in the study. A linear mixed model was used to analyze the results for the research question for the within-subject design. An alpha level of 0.1 was used for the analysis. 

## Random Effect Result

The output table(Table \@ref(tab:r1)) using ANOVA to compare null models with different random effect terms shows that nullmodel1 is the best because the p-value for comparing nullmodel1 and nullmodel2 is larger than 0.1. There is no improvement from nullmodel2 to nullmodel3 due to a high p-value,0.994. As a result, the best random effect term is (1|Id).

```{r r1, fig.cap="The result of comparing model by ANOVA",echo=FALSE,warning=FALSE,message=FALSE,comment=NA}

nullmodel1<-lmer(Time_Sec~1+(1|Id),data=dataset,REML=FALSE)

nullmodel2<-lmer(Time_Sec~ 1+(order|Id),data=dataset,REML = FALSE, control=lmerControl(check.nobs.vs.nRE="ignore"))

nullmodel3<-lmer(Time_Sec~ 1+(1+Test_Type*order|Id),data = dataset,REML = FALSE, control=lmerControl(check.nobs.vs.nRE="ignore"))

round(anova (nullmodel1, nullmodel2, nullmodel3),2)%>%
   kbl(caption = 'The result of comparing model by ANOVA',
      align = "cccc") %>%
  kable_styling(latex_options = "hold_position")

```

## Full Model Result
After finding the best-fit random effect term, the predictor variables will be added to the model one by one. Model 1 in the table only includes the most important variable, Test_Type. The result in the table(Table \@ref(tab:r2)) shows that the coefficient of Test_Type is -2.936 with a 90% confidence level is -8.064 to 2.192,  which illustrates that the average time for completing the Trail Making Test with or without background music is not significantly different between groups. Then, the variable order was added to model 2. The result from Table \@ref(tab:r2) shows that the coefficient for the variable order is -10.65 and the 90% confidence interval is  -14.848 to -6.452, which does not cover value 0, suggesting that the average time to complete the test in order 2 is 10.65 seconds faster than the order 1, holding other variables constant. Meanwhile, for model 3, the interaction between test type and order being considered for testing whether the effect of the order variable depending on the level of test type. The output from model 3 shows that the interaction term is not significant, p-value larger than 0.1 and the 90% confidence interval cover value 0. Furthermore, variable Rating was added to model 4 and showed not significantly related to completing the test. Finally, the same logic applied to model 5, which plus variable Gender and illustrate that the different Gender would not be a factor to influence student's time of accomplishing the test.

In order to find out the best-fit model for the data, ANOVA and AIC were applied to compare models. In Table \@ref(tab:r2), there is an AIC value in each model. The smaller the AIC value, the better the model. From Model 1 to Model 5, their AIC values are 760.54, 742.68, 744.21, 746.02, and 747.68. Among them, the AIC value of Model 2 is the smallest. Therefore, it is deduced that Model 2 should be the best model among the five models. To further prove that model two is the best model among the five, ANOVA is used to compare the five models. Table \@ref(tab:r3) analyzes which model is the best by looking at the p-value. When comparing model 1 and model 2, the p-value is much smaller than 0.01, which shows that model two is significantly better than model one, so model two is the best at this time. When comparing model two and model three, the p-value is 0.497, which is greater than 0.1, so adding predictor variables does not increase the fitness of the model. The same logic applies to the comparison between Model 3 and Model 4 and Model 4 and Model 5. In conclusion, through ANOVA's analysis, the conclusion is that Model 2 is still the best.


```{r, echo=FALSE,warning=FALSE,message=FALSE,comment=NA}
library(stargazer)
m1<-lmer(Time_Sec~ 1+Test_Type+(1|Id),data=dataset,REML=FALSE)

m2<-lmer(Time_Sec~ 1+Test_Type+order+(1|Id),data=dataset,REML=FALSE)


m3<-lmer(Time_Sec~ 1+Test_Type+order+Test_Type*order+(1|Id),data=dataset,REML=FALSE)

m4<-lmer(Time_Sec~ 1+Test_Type+order+Test_Type*order+Rating+(1|Id),data=dataset,REML=FALSE)


m5<-lmer(Time_Sec~ 1+Test_Type+order++Test_Type*order+Rating+Gender+(1|Id),data=dataset,REML=FALSE)
```

```{r r2 ,results='asis', message = FALSE,echo=FALSE}
stargazer(m1,m2,m3,m4,m5,  header=FALSE, type='latex',
                     title = "Linear Mixed Model Result",
          label = "tab:r2")
```



```{r r3, fig.cap="Comparing Model by ANOVA",echo=FALSE,warning=FALSE,message=FALSE,comment=NA}
round(anova(m1,m2,m3,m4,m5),2)%>%
  kbl(caption = 'To Find Out the Best Final Model by ANOVA',
      align = "cccc") %>%
  kable_styling(latex_options = "hold_position")
```


## Model Assessment Result
Root Mean Square Error(RMSE) is used to evaluate the quality of the model. RMSE stands for the standard deviation of the residuals and it helps to tell how concentrated the data is around the best fit line[@RMSE]. In Table \@ref(tab:r4), the RMSE value of the final model, model 2, is 0.135 which a good sign for the model and illustrates that the model has a good ability to predict the data accurately. The R-square is applied to assess the model as well. R-square is a statistical measure of how close the data are to the fitted regression line[@R-square]. R-square consisted two types, which are marginal R-square and conditional R-square for the linear mixed model. The paper will mainly focused on marginal R-square values, which provides the variance explained by only fixed effect. The marginal R-square for the final model, model 2, shown in Table \@ref(tab:r4) is 0.169, which means the final linear mixed model can explain 16.9% of the variation of the dependent variable. From the statistical result of the final model shown in appendix , the random effect result illustrates that the variance of Id is 43.08 and the variance of residual is 105.41. The variability due to the Id is 29%, which is means 29% within treatment variance is explained by individual differences. It is suitable to use a linear mixed model for this data.

```{r,include=FALSE}
#RMSE:
performance_rmse(m2,normalized = TRUE)

#R square:
library(MuMIn)
 r.squaredGLMM(m2)
```


```{r r4, fig.cap="Model assessment result",echo=FALSE,warning=FALSE,message=FALSE,comment=NA}
 
tibble(
  'RMSE' = 0.134,
  'Marginal R-square' = 0.169,
  'Conditional R-square' = 0.410,
  "Variance of Id"=0.29
) %>%
  kbl(caption = 'Assessment Result',
      align = "cccc") %>%
  kable_styling(latex_options = "hold_position")
```


# Discussion

## Ethics statement
The experiment conducted in this paper is about learning whether background music will influence students' attention level. The intervention in the study is background music. There is no potential to harm or endanger any participant. Moreover, the designer did not collect any sensitive data. Therefore, no formal ethics approval is required.

## Descriptive Analysis Results

### Different order will lead to different results
The data is divided into two main parts according to whether there are interference items. Then, add subgroup according to order in each group.  A part of the students is randomly selected to complete the test with background music and then complete the test without background music. The other students oppositely first completed the test without background music and then completed the test with background music. The results showed that, overall, students generally took longer to complete the test with background music. The result of order illustrates that whether it is background music or not, the completion time of the second round is less than the completion time of the first round. Therefore, it can be predicted that the order will affect the student's completion time.


### Male are more susceptible to music interference
When comparing the average time to complete the test with and without background music for different genders, the results show that the change in female and transexual people is not apparent. After adding interference factors, the average time to complete the test increases by one second. However, the average time for males to complete the test was 45 seconds before adding the interference factor. After the interference factor was added, the average time to complete the test was 50 seconds. The background music increased the completion time for the male by 5 seconds. Therefore, in all the participants in this experiment, males are more likely to be disturbed by background music, which affects their attention level.

### The enjoyment of music will affect the completion time of the test
After completing two rounds of testing, participants were asked to rate the background music, 1 to 5 anonymously. The higher the score, represents the more they liked the song.  Regardless of the environment in which the test is completed, the overall average time for the 47 students participating in the experiment to complete a test is about 45 seconds. The result of visualizing the relationship between favourability and the rating shows that when the participants give a score greater than or equal to 3 out of 5, the average time to complete the test is less than the overall average completion time.  This situation illustrates that when students hear the background music they don’t like, their attention level is much lower than those who listen to background music they like. 

### Interactive graphs on Shinyapp
In order to allow readers to have a more direct and diverse data exploration process, I drew a bar graph on shinyapp. The readers can check the distribution of the data according to the students' ratings of the background music, the gender of the students, and whether there is background music in the tests performed by the students so that you have a basic understanding of the data. The Shinyapp link for the interactive graphs is https://hongtrista.shinyapps.io/Shinyapp/?_ga=2.86381278.759236858.1619203106-1272735195.1619203106

## Model Results

### Each student’s initial attention level is different
Before creating the linear mixed model, the model assumptions needed to be checked and the suitability of the model needed to be checked as well. The model assumptions are whether the variance of the residuals is equal across groups, whether the residuals of the model are normally distributed, and whether there does not exist multicollinearity. The plots shown in the Model Diagnostics subsection under the Model section show that all the assumptions being satisfied. When checking the linear mixed model fit the data collected from the experiment, the resulting plot shown in Figure \@ref(fig:randomeffect) demonstrates that each student's initial attention level is different and fixed effects will vary each student. In other words, the linear mixed model is suitable for this data and can incorporate student-to-student variability in finishing time and improve the ability to describe how fixed effects relate to outcome.

### Background music does not significantly affect the level of attention of students
The main research question for the paper is whether background music impacts student's attention level—two different types of analysis being conducted for the data, which are descriptive analysis and statistical analysis. From the descriptive analysis, the result shows that in the case of background music, the average time for students to complete the test is longer than that without background music. For the statistical analysis, five linear mixed models with different fixed effect terms and the same random effect term being created. The purpose is to find the most suitable model for the data. Comparing models using ANOVA and AIC shows that only a model with variable order is the best model. The variable Test_Type used to show whether the data was collected from a test with background music or not has no significant relationship with the attention level in the final model. Even in descriptive analysis, the results show that background music has a negative effect on students' attention level to a certain extent, but in a statistical sense, background music does not affect students' attention.
  
### The order of testing will affect the time to complete the test
After the procedure of model selection, the results show that the order significantly affects the time it takes for students to complete the test. In the final best-fit model, the coefficient of order is -10.65, and the 90% confidence interval is from -14.85 to -6.45. The coefficient, -10.65, means, on average, the time for completing the test in second-order is 10.65 seconds faster than the time in the first order when holding other variables constant.

## Practical Implications
Although the model result of the study demonstrates that background music does not significantly impact students' attention level, it also not proved that background music fostered attention level.  For students, this is merely a matter of personal preference, such as whether they want to play background music while studying, for example, in an attempt to raise their motivation levels by playing background music.

Judging from the results of Ming Chou's[@musictype] study on which music types can distract students, hip-hop music is the most distracting, followed by classical music. The best performance is the quiet environment. According to the results of this paper, students should be careful when choosing which background music to listen to. Luckily, there is enough music readily available so that each of us has the chance to listen to our preferred music. Although the music rating is not significantly related to the completion time, the descriptive analysis shows that listing to the preferred music will improve attention level. The results may not be representative, but at least for the students in the experiment, listening to their favourite background music during the study may be conducive to attention level improvement and learning.


## Weaknesses
### Practice Effect
Each participant is measured for two conditions in the within-subject design(repeated measure design). Participants learn about the type and difficulty of the question when they take the Trail Making Test for the first time, so they may become more adept simply with the question and more proficient because of the repeated test, making the second-round test result more optimistic. In addition to the students' understanding of the test questions, some participants may feel bored or have a negative attitude to repeat the same test, making the results inaccurate.

### Hawthorn Effect
During the experiment, participants know that they are part of the experiment and observed. Their speed of doing the tests and the performance will be recorded, leading to the Hawthorne effect. Hawthorne effect stands for the tendency of some people to perform better when they know they are the participants in an experiment. The existence of the Hawthorne effect may cause students to change their behavior, such as trying to complete the test as soon as possible to achieve better performance, precisely because they know they are receiving research attention. Then, the results may be biassed and inaccurate.


### Sample Size
The primary limitation of the study is the small sample size. Large samples could have provided more reliable results. Simultaneously, the small number of participants established a deficient power level for the study, which provided a much smaller opportunity to achieve statistical significance. Small sample size may also cause a large standard deviation, which would lead the result to be less accurate and decreasingly representative of the entire population. Future research should expand the sample size.


### Additional experimental materials
The study was conducted to test how background music affected participants' attention levels in two groups. In the within-subject design, the researcher would require to prepare two different Trail Making Test for each participant due to each student needs to test twice. For the control and treatment groups in the between-subject design, only one Trail Making Test was needed because each group only sees the material once. Therefore, using a within-subject design, the individual difference of participants is reduced but instead projects problems with individual differences between the materials participant are exposed to. The materials must therefore be carefully examined to ensure equal quality in factors such as difficulty.

## Next Steps
### Between-subject Design with different types of music
After expanding the sample size, change the experiment design to a between-subjects study experiment.  Between-subjects design means each participant will only test each situation once, which prevents practice effect by eliminating the transfer of knowledge and shorten testing sessions by allowing each participant only need to do the test once.

In this paper, due to the small number of samples, only one type of background music is used for the test, namely popular music. Since the music used in the experiment in this paper is the most popular music at the time. However, given that some people may have heard it or are very familiar with it, and some may not have heard it, the impact of the song on the attention of each student may be different. In future research, several types of music that are not familiar to everyone can be used for testing, for example, hip-hop music, traditional music, lyrical music, classical music, and music with lyrics.

### Stroop Test
The Stroop test^[The Stroop Color and Word Test (SCWT) is a neuropsychological test extensively used to assess the ability to inhibit cognitive interference that occurs when the processing of a specific stimulus feature impedes the simultaneous processing of a second stimulus attribute, well-known as the Stroop Effect[@stroop]] consists of two parts: Stroop colour and Word test. Participants need to recognize the colour of words with colour properties. In other words, participants need to identify the colour of the font rather than the meaning of the colour represented by the word. For example, when the word is green but it appears in black, the participants need to answer black instead of green in the test. Students can be divided into different groups to do the Stroop test to study whether background music will distract students or study what type of background music is most likely to affect students' level of attention. The time taken by students to answer questions will be recorded as the speed at which the brain processes information, thereby inferring whether the attention is distracted.



\newpage
# Appendix
## Test 1
```{r test1, echo=FALSE, fig.align='center', fig.cap="First Trail Making Test", out.width = '80%'}
knitr::include_graphics(here("Output/images/test1.png"))
```

## Test 2
```{r test2, echo=FALSE, fig.align='center', fig.cap="Second Trail Making Test", out.width = '80%'}
knitr::include_graphics(here("Output/images/test2.png"))
```

## Survey
```{r survey, echo=FALSE, fig.align='center', fig.cap="Short survey for rating", out.width = '80%'}
knitr::include_graphics(here("Output/survey/survey.png"))
```

## Final Model Output
```{r finalmodel, echo=FALSE, fig.align='center', fig.cap="Final model result",comment=NA}
summary(m2)
```

\newpage
# References



















